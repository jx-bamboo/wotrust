(function(win){var hostname_as_int=parseInt((location.hostname||"local").substring(0,10),36);var fn_name="sifi_att_"+hostname_as_int;if(typeof win[fn_name]!="undefined"){win[fn_name].run();return}var dpx={pixels_url:"//i.simpli.fi/p?",pixels:[],matching_pixels:[],protocol:"https:",pixels_to_drop:[],dropping_pixels:false,rescue_pixel:null,company_id:"",run:function(){dpx.drop_pixels()},drop_pixels:function(){var sifi_pixels=[];if(!dpx.already_dropped_matching&&!dpx.url_contains_email_address()){dpx.get_matching_pixels()}else{dpx._drop_matching_pixels()}},get_matching_pixels:function(){var script=document.createElement("script");script.src=dpx.protocol+dpx.pixels_url+"cid="+dpx.company_id+"&cb="+fn_name+"._hp";document.body.appendChild(script)},_hp:function(pixels){dpx.matching_pixels=pixels&&pixels["pixels"]||[];dpx._drop_matching_pixels()},_drop_matching_pixels:function(){if(!dpx.already_dropped_matching){for(var i=dpx.matching_pixels.length-1;i>=0;i--){dpx.pixels_to_drop.push(dpx.matching_pixels[i])}dpx.already_dropped_matching=true}dpx._next_pixel()},_next_pixel:function(){if(dpx.pixels_to_drop.length===0)return;var src=dpx.pixels_to_drop.shift(),img=new Image;img.onload=img.onerror=function(){dpx.rescue_pixel=null;dpx._next_pixel()};img.src=dpx.protocol+src;dpx.rescue_pixel=setTimeout(function(){img.onload=img.onerror=null;dpx._next_pixel()},1e3)},url_contains_email_address:function(){var re=/(([^<>()[\]\\.,;:\s@\"]+(\.[^<>()[\]\\.,;:\s@\"]+)*)|(\".+\"))@((\[[0-9]{1,3}\.[0-9]{1,3}\.[0-9]{1,3}\.[0-9]{1,3}\])|(([a-zA-Z\-0-9]+\.)+[a-zA-Z]{2,}))/;return re.test(dpx.unescaped_url())},unescaped_url:function(){var url=document.location.href;var escaped_url=decodeURIComponent(url);while(url!==escaped_url){url=escaped_url;escaped_url=decodeURIComponent(url)}return url}};win[fn_name]=dpx;if(!document.body){if(window.addEventListener){window.addEventListener("load",dpx.run,false)}else if(window.attachEvent){window.attachEvent("onload",dpx.run)}}else{dpx.run()}})(window);
